<html>
<head>
<style>
img{height:500px; width:1000px;}
p{color:white;}
</style>
</head>
<body style="background-color:black;">
<div>
<fieldset>
<a id="link"><img id="IMG"></a>
<div style="float:right;">
<p id="desc"></p><br>
<a id="roverLINK"><img id="rover" style="height:250px; width:250px;"></a>
</div>
</fieldset>
</div>
<br>

<div>
<fieldset style="background-color:white; float:left;">
<button onclick="slide(-1)"><<</button>
<button style="background-color:white;" id="SN">1 of 4</button>
<button onclick="slide(1)">>></button><br>
<input type="date" id="DATE" value="2015-06-03"><br>
API key: <input type="text" id="key_in" value="DEMO_KEY"><br>
<input type="radio" id="r1" name="0"  onclick="about();" checked>curiosity<br>
<input type="radio" id="r2" name="0" onclick="about();">opportunity<br>
<input type="radio" id="r3" name="0" onclick="about();">spirit<br>
<button onclick="fetchData();">search</button>
</fieldset>
</div>
















<script>
const _url="https://api.nasa.gov/mars-photos/api/v1/rovers/"
var i=0;
var rover;
var data;
var con;

const fetchData=async()=>
{
document.getElementById("IMG").src="spirit.jpg";
document.getElementById("desc").innerHTML="loading";

rover="curiosity";
if(document.getElementById("r2").checked==true)
{rover="opportunity";}
if(document.getElementById("r3").checked==true)
{rover="spirit";}
i=0;
const url=_url+rover+"/photos?api_key=";
const api_key=document.getElementById("key_in").value;
var date="&earth_date="+document.getElementById("DATE").value;
const response=await fetch(`${url}${api_key}${date}`);
const _data=await response.json();
if(_data.photos.length==0)
{
alert("DATA NOT FOUND, the date selected seems to be out of selected rover's active time on Mars, try selecting another date or rover.");
return;
}
data={};
data=Object.assign({},data,_data);



display();
}

function display()
{
document.getElementById("IMG").src=data.photos[i].img_src;
document.getElementById("link").href=data.photos[i].img_src;
document.getElementById("SN").innerHTML="image "+(i+1)+" of "+data.photos.length;
var s="";
s+="<br>sol: "+data.photos[i].sol;
s+="<br>camera: "+data.photos[i].camera.full_name;
s+="<br>earth date: "+data.photos[i].earth_date;
s+="<br>rover: "+data.photos[i].rover.name;
s+="<br>landing date: "+data.photos[i].rover.landing_date;
s+="<br>launch date: "+data.photos[i].rover.launch_date;
s+="<br>status: "+data.photos[i].rover.status;
s+="<br>max sol: "+data.photos[i].rover.max_sol;
s+="<br>max date: "+data.photos[i].rover.max_date;
s+="<br>total photos: "+data.photos[i].rover.total_photos;
document.getElementById("desc").innerHTML=s;
}

function slide(x)
{
i+=x;
display();
}

function about()
{
s="https://en.wikipedia.org/wiki/";
document.getElementById("rover").src="curiosity.jpg";
document.getElementById("roverLINK").href=s+"Curiosity_(rover)";
if(document.getElementById("r2").checked==true)
{
document.getElementById("rover").src="opportunity.jpg";
document.getElementById("roverLINK").href=s+"Opportunity_(rover)";
}
if(document.getElementById("r3").checked==true)
{
document.getElementById("rover").src="spirit.jpg";
document.getElementById("roverLINK").href=s+"Spirit_(rover)";
}
}

</script>
</body>
</html>
